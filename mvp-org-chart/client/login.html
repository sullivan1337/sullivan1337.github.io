<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Org Chart Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/assets/style.css" />
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen" data-theme="light">
    <div class="bg-white p-6 rounded shadow w-80">
        <h2 class="text-xl mb-4 text-center">Sign In</h2>
        <div class="mb-2">
            <input id="email" type="email" placeholder="Email" class="w-full border p-2" />
        </div>
        <div class="mb-4">
            <input id="password" type="password" placeholder="Password" class="w-full border p-2" />
        </div>
        <button id="loginBtn" class="bg-blue-500 text-white w-full p-2 rounded">Login</button>
        <p id="error" class="text-red-500 text-sm mt-2"></p>
    </div>
    <script>
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    document.documentElement.setAttribute('data-theme', savedTheme || (prefersDark ? 'dark' : 'light'));
    document.getElementById('loginBtn').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const res = await fetch('/api/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
        });
        if(res.ok){
            const data = await res.json();
            localStorage.setItem('token', data.token);
            window.location.href = '/dashboard.html';
        } else {
            document.getElementById('error').innerText = 'Invalid credentials';
        }
    });
    </script>
</body>
</html>
